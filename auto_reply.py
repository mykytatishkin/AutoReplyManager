from pyrogram import Client, filters
from datetime import datetime
import re

# –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ Telegram API
api_id = "9902235"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à API ID
api_hash = "53b2a875f92fa666abb1493b9ccc8eab"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à API Hash

# ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
USER_CHAT_ID = 876386326  # –£–∫–∞–∂–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# ID —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —á–∞—Ç–∞ Telegram
SYSTEM_CHAT_ID = 777000  # Telegram System Notifications Chat ID

# –î–∞—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
WORK_DATES = [
    (12, 29),
    (12, 30),  # 30 –¥–µ–∫–∞–±—Ä—è
    (12, 31),  # 31 –¥–µ–∫–∞–±—Ä—è
    (1, 1),    # 1 —è–Ω–≤–∞—Ä—è
    (1, 2),    # 2 —è–Ω–≤–∞—Ä—è
    (1, 3),    # 3 —è–Ω–≤–∞—Ä—è
]

AUTO_REPLY_MESSAGE = (
    "–î–æ–±—Ä–æ–≥–æ –¥–Ω—èüéÖ\n\n"
    "–í—ñ—Ç–∞—î–º–æ –í–∞—Å —ñ–∑ –ù–æ–≤–æ—Ä—ñ—á–Ω–∏–º–∏ —Å–≤—è—Ç–∞–º–∏!üéÑ\n\n"
    "–ú–∏ –ø–æ—Å–ø—ñ—à–∞—î–º–æ –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è –∑ –í–∞–º–∏ —á—É–¥–æ–≤–æ—é –Ω–æ–≤–∏–Ω–æ—é: –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–æ—Å—Ç–µ, —ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –Ω–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç –∫—É—Ä–∞—Ç–æ—Ä—ñ–≤!üöÄ\n\n"
    "–ê–∫–∞—É–Ω—Ç –≤–∂–µ –∞–∫—Ç–∏–≤–Ω–∏–π —ñ –∫—É—Ä–∞—Ç–æ—Ä–∏ —á–µ–∫–∞—é—Ç—å –Ω–∞ –í–∞—Å! –ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –∫—É—Ä–∞—Ç–æ—Ä–∏ –±—É–¥—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –Ω–∞ –Ω—å–æ–º—É, —Ç–æ–º—É —Å–∫–æ—Ä—ñ—à–µ –ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∏–∂—á–µ üëáüèªüëáüèªüëáüèª\n\n"
    "üíå *–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –Ω–æ–≤–∏–π –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å* ‚Äì @kurator_nauverennom\n\n"
    "üìå *–í–∞–∂–ª–∏–≤–æ*: –∑ —Ü—å–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É –Ω–∞–π–±–ª–∏–∂—á—ñ –¥–Ω—ñ –∫—É—Ä–∞—Ç–æ—Ä–∏ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å, —Ç–æ–º—É –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤–∏–π –∞–∫–∞—É–Ω—ÇüöÄ\n\n"
    "–ê —Ç–∞–∫–æ–∂, —Ö–æ—á–µ–º–æ –Ω–∞–≥–∞–¥–∞—Ç–∏, —â–æ –ª–∏—à–µ 5 –¥–Ω—ñ–≤ –Ω–∞ —Ä—ñ–∫:\n"
    "üìÖ *–∑ 30.12.2023 –ø–æ 03.01.2024 (–≤–∫–ª—é—á–Ω–æ)* –∫—É—Ä–∞—Ç–æ—Ä–∏ –≤–∏—Ö—ñ–¥–Ω—ñ.\n\n"
    "–í–∏ –º–æ–∂–µ—Ç–µ –Ω–∞—Ä–∞–∑—ñ –Ω–∞–ø–∏—Å–∞—Ç–∏ –≤—Å—ñ –≤–∞—à—ñ –ø–∏—Ç–∞–Ω–Ω—è –Ω–∞ –Ω–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç —ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ –ø–µ—Ä—à—É —á–µ—Ä–≥—É.\n\n"
    "–ú–∏ –¥–æ–ø–æ–º–æ–∂–µ–º–æ –í–∞–º –≤–∏—Ä—ñ—à–∏—Ç–∏ –≤—Å—ñ –í–∞—à—ñ –ø–∏—Ç–∞–Ω–Ω—è –∑ *04.01.2024 –∑–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º –∑ 11:00 –¥–æ 19:00 –±–µ–∑ –≤–∏—Ö—ñ–¥–Ω–∏—Ö*.ü§ù\n\n"
    "–ë–∞–∂–∞—î–º–æ –≤–∞–º —á—É–¥–æ–≤–∏—Ö —Å–≤—è—Ç —ñ –∑–∞—Ä—è–¥—É –µ–Ω–µ—Ä–≥—ñ—ó –Ω–∞ –Ω–æ–≤–∏–π —Ä—ñ–∫! üéâ\n"
)


def is_working_time() -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å —Ä–∞–±–æ—á–∏–º –¥–ª—è –±–æ—Ç–∞."""
    now = datetime.now()
    return (now.month, now.day) in WORK_DATES


# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
app = Client("manager_account", api_id=api_id, api_hash=api_hash)


@app.on_message(filters.private & ~filters.me)
async def auto_reply(client, message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π."""
    if is_working_time():
        await message.reply_text(AUTO_REPLY_MESSAGE)

@app.on_message(filters.private)
async def get_chat_id(client, message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è chat_id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    print(f"Chat ID: {message.chat.id}")
    await message.reply(f"–í–∞—à Chat ID: {message.chat.id}")


def main():
    # –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...")
    app.run()


if __name__ == "__main__":
    main()